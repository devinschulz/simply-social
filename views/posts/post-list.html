<article class="post layout" ng-repeat="post in posts | PostSortFilter:show" data-post-id="{{post.id}}" ng-class="{'has-comments' : post.comments.length >= 1}">
  <div class="post_wrapper">
    <div class="post_avatar">
      <img ng-src="{{post.avatar}}" alt="{{post.name}}"/>
    </div>
    <div class="post_content">
      <div class="row">
        <div class="post_content_meta">
          <div class="post_content_meta_author">
            {{ post.name }}
          </div>
          <ul class="post_content_meta_actions">
            <li class="post_content_meta_reply">
              <a href="#" title="Reply" ng-click="toggleComments(this); post.selected[$index] = !post.selected[$index]">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13.001" enable-background="new 0 0 13 13.001"><path fill="#231F20" d="M12.499 13.001c-.204 0-.392-.125-.467-.322-1.259-3.305-3.316-3.998-4.82-3.998-.576 0-1.061.102-1.356.183v2.837c0 .208-.129.396-.325.468-.195.074-.416.017-.553-.141l-4.857-5.6c-.163-.188-.163-.467 0-.655l4.857-5.6c.137-.158.357-.216.553-.141.196.073.325.26.325.468v2.658l.199-.003c1.63.001 6.945.675 6.945 9.346 0 .241-.172.448-.41.492l-.091.008zm-11.338-6.9l3.695 4.26v-1.86c0-.203.122-.385.31-.462.079-.032 4.086-1.529 6.68 2.13-.767-5.375-4.208-6.013-5.79-6.013-.366 0-.599.035-.618.038-.145.025-.294-.017-.404-.112-.112-.095-.177-.234-.177-.381v-1.86l-3.696 4.26z"/></svg>
              </a>
            </li>
            <li class="post_content_meta_like">
              <a href="#" title="Like">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" enable-background="new 0 0 13 13"><path fill="#231F20" d="M9.59 0c-1.14 0-2.385.604-3.09 1.918-.693-1.29-1.907-1.883-3.017-1.883-1.731 0-3.483 1.415-3.483 4.118 0 4.761 5.978 8.607 6.232 8.769.082.052.175.078.268.078.105 0 .21-.033.298-.099.253-.188 6.202-4.655 6.202-9.072 0-2.514-1.715-3.829-3.41-3.829zm-3.111 11.883c-1.169-.815-5.479-4.066-5.479-7.73 0-2.143 1.287-3.118 2.483-3.118.976 0 2.222.667 2.523 2.548.039.243.248.421.494.421s.455-.178.494-.421c.306-1.906 1.589-2.583 2.596-2.583 1.161 0 2.41.885 2.41 2.829 0 3.414-4.367 7.131-5.521 8.054z"/></svg>
              </a>
            </li>
            <li class="post_content_meta_posted-at">
              <posted-on posted="post.posted"></posted-on>
            </li>
          </ul>
        </div>
        <div class="post_content_message">
          <p ng-bind-html="post.message"></p>
        </div>
        <div class="post_content_expand" ng-if="post.comments.length >= 1">
          <a ng-href="#" ng-click="toggleComments(this); post.selected[$index] = !post.selected[$index]" ng-class="{true: 'is-open'}[expanded]">{{text}} <span class="caret"></span></a>
        </div>
      </div>
    </div>
    <div class="row post_content_thumbnail" ng-if="post.thumbnail" ng-class="{'is-video' : post.video}">
      <img ng-src="{{post.thumbnail}}" alt=""/>
    </div>
  </div>
  <section class="comments" ng-show="post.selected[$index]">
    <div class="comment_wrapper">
      <div ng-repeat="comment in post.comments" class="comment" data-comment-id="{{comment.id}}">
        <div class="post_avatar">
          <img ng-src="{{comment.avatar}}" alt="{{comment.name}}"/>
        </div>
        <div class="post_content">
          <div class="row">
            <div class="post_content_meta">
              <div class="post_content_meta_author">
                {{ comment.name }}
              </div>
              <ul class="post_content_meta_actions">
                <li class="post_content_meta_reply">
                  <a href="#" title="Reply">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13.001" enable-background="new 0 0 13 13.001"><path fill="#231F20" d="M12.499 13.001c-.204 0-.392-.125-.467-.322-1.259-3.305-3.316-3.998-4.82-3.998-.576 0-1.061.102-1.356.183v2.837c0 .208-.129.396-.325.468-.195.074-.416.017-.553-.141l-4.857-5.6c-.163-.188-.163-.467 0-.655l4.857-5.6c.137-.158.357-.216.553-.141.196.073.325.26.325.468v2.658l.199-.003c1.63.001 6.945.675 6.945 9.346 0 .241-.172.448-.41.492l-.091.008zm-11.338-6.9l3.695 4.26v-1.86c0-.203.122-.385.31-.462.079-.032 4.086-1.529 6.68 2.13-.767-5.375-4.208-6.013-5.79-6.013-.366 0-.599.035-.618.038-.145.025-.294-.017-.404-.112-.112-.095-.177-.234-.177-.381v-1.86l-3.696 4.26z"/></svg>
                  </a>
                </li>
                <li class="post_content_meta_like">
                  <a href="#" title="Like">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 13 13" enable-background="new 0 0 13 13"><path fill="#231F20" d="M9.59 0c-1.14 0-2.385.604-3.09 1.918-.693-1.29-1.907-1.883-3.017-1.883-1.731 0-3.483 1.415-3.483 4.118 0 4.761 5.978 8.607 6.232 8.769.082.052.175.078.268.078.105 0 .21-.033.298-.099.253-.188 6.202-4.655 6.202-9.072 0-2.514-1.715-3.829-3.41-3.829zm-3.111 11.883c-1.169-.815-5.479-4.066-5.479-7.73 0-2.143 1.287-3.118 2.483-3.118.976 0 2.222.667 2.523 2.548.039.243.248.421.494.421s.455-.178.494-.421c.306-1.906 1.589-2.583 2.596-2.583 1.161 0 2.41.885 2.41 2.829 0 3.414-4.367 7.131-5.521 8.054z"/></svg>
                  </a>
                </li>
                <li class="post_content_meta_posted-at">
                  <posted-on posted="comment.posted"></posted-on>
                </li>
              </ul>
            </div>
            <div class="post_content_message">
              <p ng-bind-html="comment.message"></p>
            </div>
          </div>
        </div>
      </div>
      <form class="comments_reply" action="#" method="post" name="comment">
        <input ng-model="comment.reply" type="text" placeholder="Reply&hellip;"/>
      </form>
    </div>
  </section>
</article>