"use strict";angular.module("app",["ngRoute","ngSanitize","monospaced.elastic","taiPlaceholder","app.directives","app.header","app.header.directives","app.modal","app.modal.directives","app.home","app.home.filters","app.home.directives","app.settings"]).config(["$routeProvider",function(e){return e.when("/",{title:"Posts",templateUrl:"views/home.html",controller:"HomeController"}).when("/settings",{title:"Settings",templateUrl:"views/settings.html",controller:"SettingsController"})}]).config(["$httpProvider",function(e){return e.defaults.headers.get||(e.defaults.headers.get={}),e.defaults.headers.get["If-Modified-Since"]="0"}]).run(["$location","$rootScope",function(e,t){return t.$on("$routeChangeSuccess",function(e,r){return t.title=r.$$route.title})}]);
angular.module("grow",[]).directive("autoGrow",function(){return{link:function(e,n){var t,i,a,r,s;i=n[0].offsetHeight,a=n.css("paddingLeft"),r=n.css("paddingRight"),t=angular.element("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:n[0].offsetWidth-parseInt(a||0)-parseInt(r||0),fontSize:n.css("fontSize"),fontFamily:n.css("fontFamily"),lineHeight:n.css("lineHeight"),resize:"none"}),angular.element(document.body).append(t),s=function(){var e,a;e=function(e,n){var t,i;for(t=0,i="";n>t;)i+=e,t++;return i},a=n.val().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/\s{2,}/g,function(n){return e("&nbsp;",n.length-1)+" "}),t.html(a),n.css("height",Math.max(t[0].offsetHeight+10,i)+"px")},n.bind("keyup keydown keypress change",s),s()}}});
var a,focusClass;a=function(){return{restrict:"E",link:function(n,r,s){return s.ngClick||""===s.href||"#"===s.href?r.on("click",function(n){return n.preventDefault()}):void 0}}},focusClass=function(){return{link:function(n,r){return r.on("focus blur",function(){return r.toggleClass("is-focus").parent().toggleClass("is-focus")})}}},angular.module("app.directives",[]).directive("a",a).directive("focusClass",focusClass);
var HeaderController;HeaderController=["$scope","$rootScope","ModalService",function(e,r,o){return e.openModal=function(e){return e.preventDefault(),o.showModal({templateUrl:"views/modal/modal.html",controller:"ModalController"}).then(function(){return r.modalOpen=!0})}}],angular.module("app.header",["angularModalService"]).controller("HeaderController",HeaderController);
var dropdown,toggle;toggle=function(){return{restrict:"EA",template:['<a href="#" class="search_trigger" title="Toggle search">','<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 15.559" enable-background="new 0 0 16 15.559"><path fill="#231F20" d="M15.835 14.688l-4.151-3.746c.991-1.16 1.593-2.661 1.593-4.303-.001-3.661-2.978-6.639-6.639-6.639-3.66 0-6.638 2.978-6.638 6.638 0 3.661 2.978 6.638 6.638 6.638 1.659 0 3.174-.616 4.339-1.626l4.188 3.779c.096.086.216.129.335.129.137 0 .272-.056.371-.165.186-.204.169-.521-.036-.705zm-14.835-8.05c0-3.109 2.529-5.638 5.638-5.638s5.638 2.529 5.638 5.638-2.529 5.638-5.638 5.638-5.638-2.529-5.638-5.638z"/></svg>',"</a>"].join(""),transclude:!0,link:function(e,t){return t.on("click touchend",function(){return t.toggleClass("active"),e.toggled=e.toggled===!0?!1:!0})}}},dropdown=function(){return{link:function(e,t){return t.on("mouseover mouseout",function(){return t.toggleClass("is-active")})}}},angular.module("app.header.directives",[]).directive("toggle",toggle).directive("dropdown",dropdown);
var HomeController;HomeController=["$scope","feed","$sce",function(e,t,o){var n,r,l,s;for(t.getFeed().then(function(t){return e.posts=t.data.feed}),e.text="Expand",e.expanded=!1,e.toggleComments=function(e){return e.text=e.expanded?"Expand":"Collapse",e.expanded=e.expanded?!1:!0},e.filters=t.sortLabels(),e.setSelected=function(t){return e.selected=t,e.show=t.type},e.isSelected=function(t){return e.selected===t},e.setSelected(e.filters[0]),e.views=t.sortType(),s=e.views,r=0,l=s.length;l>r;r++)n=s[r],n.icon=o.trustAsHtml(n.icon);return e.setSelectedLayout=function(t){return e.selectedLayout=t},e.isSelectedLayout=function(t){return e.selectedLayout===t},e.setSelectedLayout(e.views[0])}],angular.module("app.home",["userFeed"]).controller("HomeController",HomeController);
var postedOn;postedOn=function(){return{restrict:"AE",template:'<time datetime="{{posted}}">{{formattedDate}}</time>',replace:!0,scope:{posted:"="},link:function(t){return t.formattedDate=moment(t.posted).twitterShort()}}},angular.module("app.home.directives",[]).directive("postedOn",postedOn);
var PostSortFilter;PostSortFilter=function(){return function(r,t){var e,n,i,o,l,u,f;if(angular.isUndefined(r)||angular.isUndefined(t)||!t.length)return r;if(e=[],"all"===t)return r;if("photos"===t){for(o=0,u=r.length;u>o;o++)i=r[o],i.thumbnail&&i.video===!1&&e.push(i);return e}if("videos"===t){for(l=0,f=r.length;f>l;l++)n=r[l],n.video&&e.push(n);return e}return r}},angular.module("app.home.filters",[]).filter("PostSortFilter",PostSortFilter);
var feed;feed=["$http",function(e){return feed={},feed.getFeed=function(){return e.get("data/feed.json").success(function(e){return e.feed})},feed.sortLabels=function(){return[{label:"All Posts",title:"View all posts",type:"all"},{label:"Photos",title:"View posts containing only photos",type:"photos"},{label:"Videos",title:"View posts containing only videos",type:"videos"}]},feed.sortType=function(){return[{title:"Show posts as a list",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 9" enable-background="new 0 0 9 9"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 9h9v-1h-9v1zm0-9v1h9v-1h-9zm0 5h9v-1h-9v1z"/></svg>'},{title:"Show posts as a grid",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 9" enable-background="new 0 0 9 9"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 9h3v-3h-3v3zm6 0h3v-3h-3v3zm-6-6h3v-3h-3v3zm6-3v3h3v-3h-3z"/></svg>'}]},feed}],angular.module("userFeed",[]).factory("feed",feed);
var ModalController;ModalController=["$scope","$timeout","$rootScope","close",function(o,l,r,e){var n;return n=function(){return o.open=o.open===!0?!1:!0},l(n,200),o.closeModal=function(){return r.modalOpen=!1,l(n,0),e({},1e3)}}],angular.module("app.modal",["angularModalService"]).controller("ModalController",ModalController);
var focus;focus=["$timeout",function(u){return{link:function(n,o){return u(function(){return o[0].focus()})}}}],angular.module("app.modal.directives",[]).directive("focus",focus);
var SettingsCtrl;SettingsCtrl=["$scope","settings",function(t,n){return n.getSettings().then(function(n){return t.user=n.data.settings.user,t.notifications=n.data.settings.notifications,t.options=n.data.settings.privacy}),t.saveUserDetails=function(){return t.settings.$setPristine()}}],angular.module("app.settings",["settings.Service"]).controller("SettingsController",SettingsCtrl);
var settings;settings=["$http",function(t){var n;return n={},n.getSettings=function(){return t.get("data/settings.json").success(function(t){return t.settings})},n}],angular.module("settings.Service",[]).factory("settings",settings);